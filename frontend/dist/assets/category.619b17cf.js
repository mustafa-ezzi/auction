import{aU as U,ba as j,aV as A,aW as E,bb as T,r as B,o as p,ah as y,ab as s,e,b as l,a8 as i,i as u,R as d,ad as n,a_ as P,ai as h,aj as q,ak as c,f as C,a9 as g,b5 as b,T as _,aa as D,ac as v,ag as k,ae as m,b1 as V,a$ as L,b8 as N,b9 as O}from"./index.1658c72d.js";import{L as M,V as S}from"./VSnackbar.726a4d99.js";import{V as R}from"./VTable.710b72e3.js";const z={components:{LoadingOverlay:M},data(){return{overlay:!1,projectId:null,formData:{name:"",base_price:0,player:""},showSnackbar:!1,addCategoryDialog:!1,deleteDialog:!1,loading:!1,items:[],editDialog:!1,editFormData:{name:"",base_price:0,purse:0,player:0,id:null},deleteId:null,deleteSnackbar:!1}},mounted(){this.projectId=localStorage.getItem("projectId"),this.getAllCategories()},methods:{closeDeleteDialog(){this.deleteDialog=!1},openEditDialog(r){this.editFormData={...r},this.editDialog=!0},async submitEditForm(){let r=this.editFormData;r.project=this.projectId,this.overlay=!0;try{const a=await j(`/categories/${this.editFormData.id}/`,r);this.showSnackbar=!0,this.editDialog=!1,this.getAllCategories(),this.closeEditDialog(),this.overlay=!1}catch(a){console.error("Error editing item:",a),this.overlay=!1}},closeEditDialog(){this.editDialog=!1,this.editFormData={unit:"",min_players:0,purse:0,max_players:0,id:null}},async submitForm(){let r=this.formData;r.project=this.projectId,this.overlay=!0;try{const a=await A("/create/categories/",r);this.showSnackbar=!0,this.getAllCategories(),this.addCategoryDialog=!1,this.resetForm(),this.overlay=!1}catch(a){console.log(a),this.overlay=!1}},resetForm(){this.formData.name="",this.formData.base_price=0,this.formData.player=""},async getAllCategories(){this.overlay=!0;try{const r=await E(`/all/category/${this.projectId}/`);this.items=r.data.data,this.overlay=!1}catch(r){console.error("Error fetching product options:",r),this.overlay=!1}},async deleteTeam(){this.overlay=!0;try{const r=await T(`/categories/${this.deleteId}/`);this.deleteSnackbar=!0,this.deleteDialog=!1,this.getAllCategories(),this.overlay=!1}catch(r){console.error("Error deleting product:",r),this.overlay=!1}}}},F=r=>(N("data-v-6e6dbc44"),r=r(),O(),r),W={style:{"background-color":"white","border-radius":"30px"}},Y=F(()=>s("h1",{class:"ml-5 mt-2 heading"}," Category ",-1)),G=F(()=>s("thead",null,[s("tr",null,[s("th",null,"ID"),s("th",null,"Name"),s("th",null,"Players"),s("th",null,"Base Price"),s("th",null," Actions ")])],-1)),H={key:0},J={colspan:"6"};function K(r,a,Q,X,t,f){const w=B("LoadingOverlay");return p(),y(h,null,[s("div",W,[e(n,null,{default:l(()=>[e(i,{sm:"6",md:"9"},{default:l(()=>[Y]),_:1}),e(i,{sm:"6",md:"3"},{default:l(()=>[e(u,{class:"primary left",onClick:a[0]||(a[0]=o=>t.addCategoryDialog=!0)},{default:l(()=>[d(" Add Category + ")]),_:1})]),_:1})]),_:1}),e(n,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(R,{style:{"border-radius":"20px"}},{default:l(()=>[G,s("tbody",null,[t.loading?(p(),y("tr",H,[s("td",J,[e(P,{color:"primary",max:"500",indeterminate:"",rounded:"",width:"10",height:"10"})])])):(p(!0),y(h,{key:1},q(t.items,(o,x)=>(p(),y("tr",{key:x},[s("td",null,c(o.id),1),s("td",null,c(o.name),1),s("td",null,c(o.player),1),s("td",null,c(o.base_price),1),s("td",null,[e(u,{class:"m-1",color:"primary",size:"small",onClick:I=>f.openEditDialog(o)},{default:l(()=>[e(C,null,{default:l(()=>[d("mdi-edit")]),_:1})]),_:2},1032,["onClick"]),e(u,{color:"error",class:"m-1",text:"Open Dialog",size:"small",onClick:I=>{t.deleteDialog=!0,t.deleteId=o.id}},{default:l(()=>[e(C,null,{default:l(()=>[d("mdi-delete")]),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1})]),e(V,{modelValue:t.editDialog,"onUpdate:modelValue":a[5]||(a[5]=o=>t.editDialog=o),"max-width":"500",persistent:""},{default:l(()=>[e(g,null,{default:l(()=>[e(b,{class:"headline blue--text"},{default:l(()=>[d(" Update "+c(t.editFormData.name),1)]),_:1}),e(_),e(D,null,{default:l(()=>[e(v,{onSubmit:k(f.submitEditForm,["prevent"])},{default:l(()=>[e(n,null,{default:l(()=>[e(i,{cols:"12",md:"12"},{default:l(()=>[e(m,{modelValue:t.editFormData.name,"onUpdate:modelValue":a[1]||(a[1]=o=>t.editFormData.name=o),label:"Name",required:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"12"},{default:l(()=>[e(m,{modelValue:t.editFormData.base_price,"onUpdate:modelValue":a[2]||(a[2]=o=>t.editFormData.base_price=o),type:"number",label:"Base Price",required:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"12"},{default:l(()=>[e(m,{modelValue:t.editFormData.player,"onUpdate:modelValue":a[3]||(a[3]=o=>t.editFormData.player=o),type:"number",label:"Max Players",required:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{class:"mt-6"},{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(u,{type:"submit",class:"mr-2"},{default:l(()=>[d(" Save Changes ")]),_:1}),e(u,{color:"secondary",onClick:a[4]||(a[4]=o=>t.editDialog=!1)},{default:l(()=>[d(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(V,{modelValue:t.deleteDialog,"onUpdate:modelValue":a[7]||(a[7]=o=>t.deleteDialog=o),width:"450",persistent:""},{default:l(()=>[e(g,null,{default:l(()=>[e(b,{class:"headline red--text"},{default:l(()=>[d(" Confirm Delete ")]),_:1}),e(_),e(D,null,{default:l(()=>[d(" Are you sure you want to delete this item? ")]),_:1}),e(L,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(u,{class:"mr-2",color:"error",dark:"",onClick:f.deleteTeam},{default:l(()=>[d(" Delete ")]),_:1},8,["onClick"]),e(u,{color:"secondary",onClick:a[6]||(a[6]=o=>t.deleteDialog=!1)},{default:l(()=>[d(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(V,{modelValue:t.addCategoryDialog,"onUpdate:modelValue":a[12]||(a[12]=o=>t.addCategoryDialog=o),"max-width":"500",persistent:""},{default:l(()=>[e(g,null,{default:l(()=>[e(b,{class:"headline"},{default:l(()=>[d(" Add Category ")]),_:1}),e(_),e(D,null,{default:l(()=>[e(v,{onSubmit:k(f.submitForm,["prevent"])},{default:l(()=>[e(n,null,{default:l(()=>[e(i,{cols:"12",md:"12"},{default:l(()=>[e(m,{modelValue:t.formData.name,"onUpdate:modelValue":a[8]||(a[8]=o=>t.formData.name=o),label:"Name",required:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"12"},{default:l(()=>[e(m,{modelValue:t.formData.base_price,"onUpdate:modelValue":a[9]||(a[9]=o=>t.formData.base_price=o),type:"number",label:"Base Price",required:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"12"},{default:l(()=>[e(m,{modelValue:t.formData.player,"onUpdate:modelValue":a[10]||(a[10]=o=>t.formData.player=o),type:"number",label:"Max Players",required:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{class:"mt-6"},{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(u,{type:"submit",class:"mr-2"},{default:l(()=>[d(" Submit ")]),_:1}),e(u,{color:"secondary",onClick:a[11]||(a[11]=o=>t.addCategoryDialog=!1)},{default:l(()=>[d(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(S,{modelValue:t.showSnackbar,"onUpdate:modelValue":a[13]||(a[13]=o=>t.showSnackbar=o),color:"success",rounded:"pill"},{default:l(()=>[d(" Record Created / Updated Successfully ")]),_:1},8,["modelValue"]),e(S,{modelValue:t.deleteSnackbar,"onUpdate:modelValue":a[14]||(a[14]=o=>t.deleteSnackbar=o),color:"error",rounded:"pill"},{default:l(()=>[d(" Your record deleted successfully ")]),_:1},8,["modelValue"]),e(w,{isVisible:t.overlay},null,8,["isVisible"])],64)}const le=U(z,[["render",K],["__scopeId","data-v-6e6dbc44"]]);export{le as default};
