import{l as re,d1 as ie,aM as ue,d2 as de,$ as ce,c as I,j as y,be as fe,w as x,c7 as ge,C as pe,aP as he,aQ as me,d3 as ve,e as o,d4 as ye,G as A,ai as j,E as K,aD as be,cW as xe,d5 as _e,aT as ke,bf as Ve,aL as Q,d6 as Ce,aK as Se,av as De,aU as we,aV as Ie,ba as Fe,aW as Le,r as Pe,o as d,ah as _,b as a,ad as H,a8 as i,ac as je,ag as Re,ae as J,ab as c,f as F,R as u,a as L,d0 as P,i as O,a9 as X,b5 as Te,T as Ue,aa as Be,ak as Ne,a$ as Ae,b1 as He,b8 as Oe,b9 as Ee}from"./index.1658c72d.js";import{L as ze,V as Ge}from"./VSnackbar.726a4d99.js";const Me=re({name:"VTextarea",directives:{Intersect:ie},inheritAttrs:!1,props:{autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,...ue(),...de()},emits:{"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:V,emit:E,slots:l}=t;const n=ce(e,"modelValue"),R=I(()=>typeof e.counterValue=="function"?e.counterValue(n.value):(n.value||"").toString().length),r=I(()=>{if(V.maxlength)return V.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function Y(s,f){var g,p;!e.autofocus||!s||(g=f[0].target)==null||(p=g.focus)==null||p.call(g)}const z=y(),C=y(),h=y(!1),G=y(""),S=y(),M=I(()=>h.value||e.persistentPlaceholder),Z=I(()=>e.messages.length?e.messages:M.value||e.persistentHint?e.hint:"");function T(){if(S.value!==document.activeElement){var s;(s=S.value)==null||s.focus()}h.value||(h.value=!0)}function $(s){T(),E("click:control",s)}function ee(s){s.stopPropagation(),T(),Q(()=>{n.value="",Ce(e["onClick:clear"],s)})}function te(s){n.value=s.target.value}const m=y();function v(){!e.autoGrow||Q(()=>{if(!m.value||!C.value)return;const s=getComputedStyle(m.value),f=getComputedStyle(C.value.$el),g=parseFloat(s.getPropertyValue("--v-field-padding-top"))+parseFloat(s.getPropertyValue("--v-input-padding-top"))+parseFloat(s.getPropertyValue("--v-field-padding-bottom")),p=m.value.scrollHeight,U=parseFloat(s.lineHeight),B=Math.max(parseFloat(e.rows)*U+g,parseFloat(f.getPropertyValue("--v-input-control-height"))),N=parseFloat(e.maxRows)*U+g||1/0;G.value=Se(De(p!=null?p:0,B,N))})}fe(v),x(n,v),x(()=>e.rows,v),x(()=>e.maxRows,v),x(()=>e.density,v);let D;return x(m,s=>{if(s)D=new ResizeObserver(v),D.observe(m.value);else{var f;(f=D)==null||f.disconnect()}}),ge(()=>{var s;(s=D)==null||s.disconnect()}),pe(()=>{const s=!!(l.counter||e.counter||e.counterValue),f=!!(s||l.details),[g,p]=he(V),[{modelValue:U,...B}]=me(e),[N]=ve(e);return o(ke,A({ref:z,modelValue:n.value,"onUpdate:modelValue":b=>n.value=b,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--flush-details":["plain","underlined"].includes(e.variant)}],"onClick:prepend":e["onClick:prepend"],"onClick:append":e["onClick:append"]},g,B,{messages:Z.value}),{...l,default:b=>{let{isDisabled:w,isDirty:q,isReadonly:oe,isValid:le}=b;return o(ye,A({ref:C,style:{"--v-textarea-control-height":G.value},"onClick:control":$,"onClick:clear":ee,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},N,{active:M.value||q.value,dirty:q.value||e.dirty,focused:h.value,error:le.value===!1}),{...l,default:ae=>{let{props:{class:W,...se}}=ae;return o(j,null,[e.prefix&&o("span",{class:"v-text-field__prefix"},[e.prefix]),K(o("textarea",A({ref:S,class:W,value:n.value,onInput:te,autofocus:e.autofocus,readonly:oe.value,disabled:w.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:T,onBlur:()=>h.value=!1},se,p),null),[[be("intersect"),{handler:Y},null,{once:!0}]]),e.autoGrow&&K(o("textarea",{class:[W,"v-textarea__sizer"],"onUpdate:modelValue":ne=>n.value=ne,ref:m,readonly:!0,"aria-hidden":"true"},null),[[xe,n.value]]),e.suffix&&o("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:f?b=>{var w;return o(j,null,[(w=l.details)==null?void 0:w.call(l,b),s&&o(j,null,[o("span",null,null),o(_e,{active:e.persistentCounter||h.value,value:R.value,max:r.value},l.counter)])])}:void 0})}),Ve({},z,C,S)}}),qe={components:{LoadingOverlay:ze},data(){return{deleteDialog:!1,subType:null,overlay:!1,projectId:null,selectedFile:null,selectedSponsor1:null,selectedSponsor2:null,selectedbackground:null,logo:null,sponsor1:null,sponsor2:null,background:null,showSnackbar:!1,formData:{unit:"",min_players:0,max_players:0,description:"",name:""}}},mounted(){this.projectId=localStorage.getItem("projectId"),this.projectId&&this.getProjectSettings()},methods:{async deleteImage(){const e={id:this.projectId,type:"settings",sub_type:this.subType};try{this.overlay=!0,await Ie("/delete/image/",e),this.subType==="logo"?this.logo=null:this.subType==="sponsor1"?this.sponsor1=null:this.subType==="sponsor2"?this.sponsor2=null:this.subType==="background"&&(this.background=null),this.subType=null,this.deleteDialog=!1,this.overlay=!1}catch(t){console.error("Error deleting logo:",t)}},handleFileChange(e){const t=e.target.files[0];t&&(this.logo=URL.createObjectURL(t),this.selectedFile=t)},handleSponsor1Logo(e){const t=e.target.files[0];t&&(this.sponsor1=URL.createObjectURL(t),this.selectedSponsor1=t)},handleSponsor2Logo(e){const t=e.target.files[0];t&&(this.sponsor2=URL.createObjectURL(t),this.selectedSponsor2=t)},handleBackgroundLogo(e){const t=e.target.files[0];t&&(this.background=URL.createObjectURL(t),this.selectedbackground=t)},async submitForm(){const e=new FormData;this.selectedFile&&e.append("logo",this.selectedFile),this.selectedSponsor1&&e.append("sponsor1",this.selectedSponsor1),this.selectedSponsor2&&e.append("sponsor2",this.selectedSponsor2),this.selectedbackground&&e.append("background",this.selectedbackground);for(const t in this.formData)this.formData.hasOwnProperty(t)&&e.append(t,this.formData[t]);this.overlay=!0;try{await Fe(`/project/${this.projectId}/`,e),this.getProjectSettings(),this.showSnackbar=!0,this.overlay=!1}catch(t){console.error("Error editing item:",t),this.overlay=!1}},async getProjectSettings(){this.overlay=!0;try{let t=(await Le(`/project/${this.projectId}/`)).data.data;this.formData.name=t.name,this.formData.description=t.description,this.formData.min_players=0,this.formData.max_players=0,this.formData.unit=t.unit,this.logo=t.logo,this.sponsor1=t.sponsor1,this.sponsor2=t.sponsor2,this.background=t.background,this.overlay=!1}catch(e){console.error("Error fetching product options:",e),this.overlay=!1}},openDialog(e){this.subType=e,this.deleteDialog=!0}}},k=e=>(Oe("data-v-de2ed581"),e=e(),Ee(),e),We=k(()=>c("h1",{class:"heading"}," Settings ",-1)),Ke={key:0,class:"image-container"},Qe=k(()=>c("h1",{class:"logo"}," Logo",-1)),Je=["src"],Xe={key:0,class:"image-container"},Ye=k(()=>c("h1",{class:"background-text"},"Auction Background ",-1)),Ze=["src"],$e={key:0,class:"image-container"},et=k(()=>c("h1",{class:"sponsor1"},"Sponsor 1",-1)),tt=["src"],ot={key:0,class:"image-container"},lt=k(()=>c("h1",{class:"sponsor2"},"Sponsor 2 ",-1)),at=["src"];function st(e,t,V,E,l,n){const R=Pe("LoadingOverlay");return d(),_(j,null,[o(X,{class:"pa-8",style:{"border-radius":"30px"}},{default:a(()=>[o(H,null,{default:a(()=>[o(i,{cols:"3"},{default:a(()=>[We]),_:1}),o(i,{cols:"12"},{default:a(()=>[o(je,{onSubmit:Re(n.submitForm,["prevent"])},{default:a(()=>[o(H,null,{default:a(()=>[o(i,{cols:"12",md:"6"},{default:a(()=>[o(J,{modelValue:l.formData.name,"onUpdate:modelValue":t[0]||(t[0]=r=>l.formData.name=r),label:"Project Name",required:""},null,8,["modelValue"])]),_:1}),o(i,{cols:"12",md:"6"},{default:a(()=>[o(J,{modelValue:l.formData.unit,"onUpdate:modelValue":t[1]||(t[1]=r=>l.formData.unit=r),label:"Project Unit",required:""},null,8,["modelValue"])]),_:1}),o(i,{cols:"12"},{default:a(()=>[o(Me,{modelValue:l.formData.description,"onUpdate:modelValue":t[2]||(t[2]=r=>l.formData.description=r),label:"Project Description",required:""},null,8,["modelValue"])]),_:1}),o(i,{cols:"12",md:"3"},{default:a(()=>[l.logo?(d(),_("div",Ke,[Qe,c("img",{src:l.logo,alt:"Project Logo",style:{width:"130px",height:"139px","border-radius":"33px"}},null,8,Je),o(F,{class:"delete-icon",onClick:t[3]||(t[3]=r=>n.openDialog("logo"))},{default:a(()=>[u("mdi-delete")]),_:1})])):(d(),L(P,{key:1,label:"Project Logo",chips:"",type:"file",onChange:n.handleFileChange},null,8,["onChange"]))]),_:1}),o(i,{cols:"12",md:"3"},{default:a(()=>[l.background?(d(),_("div",Xe,[Ye,c("img",{src:l.background,alt:"Background",style:{width:"130px",height:"130px","border-radius":"33px"}},null,8,Ze),o(F,{class:"delete-icon",onClick:t[4]||(t[4]=r=>n.openDialog("background"))},{default:a(()=>[u("mdi-delete")]),_:1})])):(d(),L(P,{key:1,label:"Add Background",chips:"",type:"file",onChange:n.handleBackgroundLogo},null,8,["onChange"]))]),_:1}),o(i,{cols:"12",md:"3"},{default:a(()=>[l.sponsor1?(d(),_("div",$e,[et,c("img",{src:l.sponsor1,alt:"Sponsor 1 Logo",style:{width:"130px",height:"130px","border-radius":"33px"}},null,8,tt),o(F,{class:"delete-icon",onClick:t[5]||(t[5]=r=>n.openDialog("sponsor1"))},{default:a(()=>[u("mdi-delete")]),_:1})])):(d(),L(P,{key:1,label:"Sponsor 1 Logo",chips:"",type:"file",onChange:n.handleSponsor1Logo},null,8,["onChange"]))]),_:1}),o(i,{cols:"12",md:"3"},{default:a(()=>[l.sponsor2?(d(),_("div",ot,[lt,c("img",{src:l.sponsor2,alt:"Sponsor 2 Logo",style:{width:"130px",height:"130px","border-radius":"33px"}},null,8,at),o(F,{class:"delete-icon",onClick:t[6]||(t[6]=r=>n.openDialog("sponsor2"))},{default:a(()=>[u("mdi-delete")]),_:1})])):(d(),L(P,{key:1,label:"Sponsor 2 Logo",chips:"",type:"file",onChange:n.handleSponsor2Logo},null,8,["onChange"]))]),_:1})]),_:1}),o(H,null,{default:a(()=>[o(i,{cols:"12"},{default:a(()=>[o(O,{type:"submit",class:"mr-2 mt-5"},{default:a(()=>[u(" Save Changes ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1}),o(R,{isVisible:l.overlay},null,8,["isVisible"]),o(He,{modelValue:l.deleteDialog,"onUpdate:modelValue":t[9]||(t[9]=r=>l.deleteDialog=r),persistent:"","max-width":"400"},{default:a(()=>[o(X,null,{default:a(()=>[o(Te,{class:"headline red--text"},{default:a(()=>[u("Delete Confirmation")]),_:1}),o(Ue),o(Be,null,{default:a(()=>[u(" Are you sure you want to delete this "+Ne(l.subType)+"? ",1)]),_:1}),o(Ae,null,{default:a(()=>[o(O,{color:"grey",onClick:t[7]||(t[7]=r=>{l.deleteDialog=!1,l.subType=null})},{default:a(()=>[u("Cancel")]),_:1}),o(O,{color:"red",onClick:t[8]||(t[8]=r=>n.deleteImage())},{default:a(()=>[u("Delete")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Ge,{modelValue:l.showSnackbar,"onUpdate:modelValue":t[10]||(t[10]=r=>l.showSnackbar=r),color:"success",rounded:"pill"},{default:a(()=>[u(" Record Created / Updated Successfully ")]),_:1},8,["modelValue"])],64)}const it=we(qe,[["render",st],["__scopeId","data-v-de2ed581"]]);export{it as default};
