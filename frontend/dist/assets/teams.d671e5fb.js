import{aU as U,aV as C,ba as L,aW as j,bb as A,r as S,o as m,ah as c,ab as r,e,b as l,a8 as d,i as n,R as i,ad as g,ai as w,aj as E,ak as f,aY as B,f as p,a9 as _,b5 as y,T as D,aa as b,a$ as k,b1 as V,ac as F,ag as P,ae as h,a as N,d0 as T}from"./index.1658c72d.js";import{L as O,V as R}from"./VSnackbar.726a4d99.js";import{V as q}from"./VTable.710b72e3.js";import{V as x}from"./VContainer.56531647.js";const z={components:{LoadingOverlay:O},data(){return{overlay:!1,DeleteLogoDialogue:!1,projectId:null,formData:{name:"",purse_allocated:0,available_purse:0,logo:null},editformData:{name:"",password:"",username:"",id:null,purse_allocated:0,available_purse:0,logo:null},showPassword:!1,items:[],deleteDialog:!1,createTeam:!1,editDialog:!1,selectedFile:null,deleteId:null,message:null,snackbar:!1}},mounted(){this.projectId=localStorage.getItem("projectId"),this.getAllTeamsByProjectId()},methods:{openDeleteDialog(){this.DeleteLogoDialogue=!0},async deleteLogo(){const s={id:this.editformData.id,type:"team",subType:null};try{this.overlay=!0,await C("/delete/image/",s),this.editformData.logo=null,this.selectedFile=null,this.overlay=!1,this.DeleteLogoDialogue=!1,this[this.subType]=null,this.subType=null}catch(a){console.error("Error deleting logo:",a)}},handleFileChange(s){const a=s.target.files[0];a&&(this.selectedFile=a,this.editformData.logo=URL.createObjectURL(a))},openEditDialog(s){this.editformData={...s},this.selectedFile=this.editformData.logo,this.editDialog=!0},async submitEditForm(){const s=new FormData;this.selectedFile?s.append("logo",this.selectedFile):this.editformData.logo||(this.editformData.logo=null,this.selectedFile=null);for(const a in this.editformData)this.editformData.hasOwnProperty(a)&&s.append(a,this.editformData[a]);s.append("project",this.projectId),this.overlay=!0;try{await L(`/teams/${this.editformData.id}/`,s),this.message="Record Created / Updated Successfully",this.snackbar=!0,this.getAllTeamsByProjectId(),this.closeEditDialog(),this.overlay=!1}catch(a){console.error("Error editing item:",a),this.overlay=!1}},closeEditDialog(){this.editDialog=!1,this.selectedFile=null,this.editformData={name:"",purse_allocated:0,purse_available:0,id:null}},async submitForm(){const s=new FormData;if(this.selectedFile)s.append("logo",this.selectedFile);else{this.message="Team Logo Missing",this.snackbar=!0;return}for(const a in this.formData)this.formData.hasOwnProperty(a)&&s.append(a,this.formData[a]);s.append("project",this.projectId),this.overlay=!0;try{await C("/create/teams/",s),this.showSnackbar=!0,this.createTeam=!1,this.selectedFile=null,this.getAllTeamsByProjectId(),this.resetForm(),this.overlay=!1}catch(a){console.log(a),this.overlay=!1}},togglePasswordVisibility(){this.showPassword=!0},async getAllTeamsByProjectId(){this.overlay=!0;try{const s=await j(`/all/teams/${this.projectId}/`);this.items=s.data.data.map(a=>({...a,showPassword:!1}))}catch(s){console.error("Error fetching teams:",s)}finally{this.overlay=!1}},async deleteTeam(){this.overlay=!0;try{await A(`/teams/${this.deleteId}/`),this.message="Record Deleted Successfully",this.snackbar=!0,this.deleteDialog=!1,this.getAllTeamsByProjectId(),this.overlay=!1}catch(s){console.error("Error deleting product:",s),this.overlay=!1}},togglePasswordVisibility(s){s.showPassword=!s.showPassword},resetForm(){this.formData.name="",this.formData.purse_allocated=0,this.formData.available_purse=0,this.formData.logo=null}}},M={style:{"background-color":"white","border-radius":"30px"}},W=r("h1",{class:"ml-5 mt-2 heading"},"Teams",-1),Y=r("thead",null,[r("tr",null,[r("th",null,"Name"),r("th",null,"Logo"),r("th",null,"Purse Allocated"),r("th",null,"Purse Available"),r("th",null,"Username"),r("th",null,"Password"),r("th",null,"Actions")])],-1),G=["src"],H={class:"d-flex align-center"},J={key:0},K={key:1},Q={key:0,class:"image-container"},X=["src"],Z=r("p",null,"Are you sure you want to delete this Profile Pic",-1);function $(s,a,ee,le,o,u){const I=S("LoadingOverlay");return m(),c(w,null,[r("div",M,[e(g,null,{default:l(()=>[e(d,{sm:"6",md:"9"},{default:l(()=>[W]),_:1}),e(d,{sm:"6",class:"mb-3",md:"3"},{default:l(()=>[e(n,{class:"primary left",onClick:a[0]||(a[0]=t=>o.createTeam=!0)},{default:l(()=>[i(" Add Teams + ")]),_:1})]),_:1})]),_:1}),e(q,{style:{"border-radius":"20px"}},{default:l(()=>[Y,r("tbody",null,[(m(!0),c(w,null,E(o.items,t=>(m(),c("tr",{key:t.name},[r("td",null,f(t.name),1),r("td",null,[t.logo?(m(),c("img",{key:0,class:"image",src:t.logo},null,8,G)):B("",!0)]),r("td",null,f(t.purse_allocated),1),r("td",null,f(t.available_purse),1),r("td",null,f(t.username),1),r("td",null,[r("div",H,[t.showPassword?(m(),c("span",K,f(t.password),1)):(m(),c("span",J)),e(p,{small:"",class:"ml-2",onClick:v=>u.togglePasswordVisibility(t)},{default:l(()=>[i(f(t.showPassword?"mdi-eye-off":"mdi-eye"),1)]),_:2},1032,["onClick"])])]),r("td",null,[e(n,{class:"m-1",color:"primary",size:"small",onClick:v=>u.openEditDialog(t)},{default:l(()=>[e(p,null,{default:l(()=>[i("mdi-edit")]),_:1})]),_:2},1032,["onClick"]),e(n,{color:"error",class:"m-1",text:"Open Dialog",size:"small",onClick:v=>(o.deleteDialog=!0,o.deleteId=t.id)},{default:l(()=>[e(p,null,{default:l(()=>[i("mdi-delete")]),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1})]),e(V,{modelValue:o.deleteDialog,"onUpdate:modelValue":a[2]||(a[2]=t=>o.deleteDialog=t),persistent:"",width:"450"},{default:l(()=>[e(_,null,{default:l(()=>[e(y,{class:"headline red--text"},{default:l(()=>[i(" Confirm Delete ? ")]),_:1}),e(D),e(b,null,{default:l(()=>[i(" Are you sure you want to delete this item? ")]),_:1}),e(k,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(n,{class:"mr-2",color:"error",dark:"",onClick:u.deleteTeam},{default:l(()=>[i(" Delete ")]),_:1},8,["onClick"]),e(n,{color:"secondary",onClick:a[1]||(a[1]=t=>o.deleteDialog=!1)},{default:l(()=>[i(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(V,{modelValue:o.editDialog,"onUpdate:modelValue":a[7]||(a[7]=t=>o.editDialog=t),persistent:"","max-width":"550"},{default:l(()=>[e(_,null,{default:l(()=>[e(y,{class:"headline blue--text"},{default:l(()=>[i(" Update "+f(o.editformData.name),1)]),_:1}),e(D),e(b,null,{default:l(()=>[e(F,{onSubmit:P(u.submitEditForm,["prevent"])},{default:l(()=>[e(x,null,{default:l(()=>[e(g,null,{default:l(()=>[e(d,{cols:"12",md:"6"},{default:l(()=>[e(h,{modelValue:o.editformData.name,"onUpdate:modelValue":a[3]||(a[3]=t=>o.editformData.name=t),label:"Name",required:"","hide-details":""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:l(()=>[o.editformData.logo?(m(),c("div",Q,[r("img",{src:o.editformData.logo,alt:"Logo",style:{width:"100px",height:"100px","border-radius":"50%"}},null,8,X),e(p,{class:"delete-icon",onClick:u.openDeleteDialog},{default:l(()=>[i("mdi-delete")]),_:1},8,["onClick"])])):(m(),N(T,{key:1,ref:"fileInput",label:"Upload Image",chips:"",type:"file",onChange:u.handleFileChange},null,8,["onChange"]))]),_:1}),e(d,{cols:"12",md:"6"},{default:l(()=>[e(h,{modelValue:o.editformData.purse_allocated,"onUpdate:modelValue":a[4]||(a[4]=t=>o.editformData.purse_allocated=t),type:"number",label:"Purse Allocated","hide-details":"",required:""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:l(()=>[e(h,{modelValue:o.editformData.available_purse,"onUpdate:modelValue":a[5]||(a[5]=t=>o.editformData.available_purse=t),type:"number",label:"Purse Available","hide-details":"",required:""},null,8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(n,{type:"submit",class:"mr-2"},{default:l(()=>[i("Save Changes")]),_:1}),e(n,{color:"secondary",onClick:a[6]||(a[6]=t=>o.editDialog=!1)},{default:l(()=>[i("Cancel")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(V,{modelValue:o.DeleteLogoDialogue,"onUpdate:modelValue":a[9]||(a[9]=t=>o.DeleteLogoDialogue=t),persistent:"","max-width":"400"},{default:l(()=>[e(_,null,{default:l(()=>[e(y,{class:"headline red--text text-center"},{default:l(()=>[e(p,{large:""},{default:l(()=>[i("mdi-delete")]),_:1}),i(" Delete Confirmation ")]),_:1}),e(D),e(b,{class:"text-center"},{default:l(()=>[Z]),_:1}),e(k,{class:"justify-center"},{default:l(()=>[e(n,{color:"grey",onClick:a[8]||(a[8]=t=>o.DeleteLogoDialogue=!1)},{default:l(()=>[i("Cancel")]),_:1}),e(n,{color:"red",onClick:u.deleteLogo},{default:l(()=>[i("Delete")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(V,{modelValue:o.createTeam,"onUpdate:modelValue":a[14]||(a[14]=t=>o.createTeam=t),persistent:"",width:"550"},{default:l(()=>[e(_,null,{default:l(()=>[e(y,{class:"headline red--text"},{default:l(()=>[i(" Add Teams ")]),_:1}),e(D),e(b,null,{default:l(()=>[e(F,{onSubmit:P(u.submitForm,["prevent"])},{default:l(()=>[e(x,null,{default:l(()=>[e(g,null,{default:l(()=>[e(d,{cols:"12",md:"6"},{default:l(()=>[e(h,{modelValue:o.formData.name,"onUpdate:modelValue":a[10]||(a[10]=t=>o.formData.name=t),label:"Name","hide-details":""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:l(()=>[e(T,{ref:"fileInput",label:"Upload Image",chips:"",type:"file",onChange:u.handleFileChange},null,8,["onChange"])]),_:1}),e(d,{cols:"12",md:"6"},{default:l(()=>[e(h,{modelValue:o.formData.purse_allocated,"onUpdate:modelValue":a[11]||(a[11]=t=>o.formData.purse_allocated=t),type:"number",label:"Purse Allocated","hide-details":"",required:""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:l(()=>[e(h,{modelValue:o.formData.available_purse,"onUpdate:modelValue":a[12]||(a[12]=t=>o.formData.available_purse=t),type:"number",label:" Purse Available","hide-details":"",required:""},null,8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(n,{type:"submit",class:"mr-2"},{default:l(()=>[i(" Save Changes ")]),_:1}),e(n,{color:"secondary",onClick:a[13]||(a[13]=t=>o.createTeam=!1)},{default:l(()=>[i(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(I,{isVisible:o.overlay},null,8,["isVisible"]),e(R,{modelValue:o.snackbar,"onUpdate:modelValue":a[15]||(a[15]=t=>o.snackbar=t),color:"error",rounded:"pill"},{default:l(()=>[i(f(o.message),1)]),_:1},8,["modelValue"])],64)}const re=U(z,[["render",$]]);export{re as default};
